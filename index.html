<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>数据管理系统</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body, .wrap {
      width: 100vw;
      min-height: 100vh;
      background: #f5f5f5;
      font-family: 'Microsoft YaHei', SimHei, sans-serif;
    }

    .content {
      display: flex;
      flex-direction: column;
    }

    .right-content {
      flex: 1;
    }

    /* 页面标题 */
    .page-header {
      background: linear-gradient(135deg, #2196F3, #1976D2);
      color: #fff;
      padding: 12px 15px;
      font-size: 16px;
      font-weight: 500;
      display: flex;
      align-items: center;
    }

    .page-header .back-btn {
      margin-right: 10px;
      cursor: pointer;
      font-size: 18px;
    }

    /* 上方表单区域 */
    .top-content {
      display: flex;
      flex-wrap: wrap;
      background: #fff;
      padding: 12px 15px;
      border-bottom: 1px solid #e0e0e0;
    }

    .list-box {
      margin-right: 15px;
    }

    .list-items {
      display: flex;
      margin-bottom: 8px;
      position: relative;
      align-items: center;
    }

    label {
      text-align: justify;
      width: 70px;
      margin-right: 8px;
      font-size: 13px;
      color: #333;
    }

    input {
      width: 120px;
      height: 26px;
      border: 1px solid #ddd;
      background: #fff;
      color: #333;
      padding: 0 8px;
      font-size: 12px;
    }

    input:focus {
      outline: none;
      border-color: #2196F3;
    }

    .center {
      text-align: center;
    }

    /* 下拉按钮样式 */
    .right-button {
      position: absolute;
      right: 1px;
      top: 50%;
      transform: translateY(-50%);
      background: #f5f5f5;
      border: none;
      border-left: 1px solid #ddd;
      cursor: pointer;
      padding: 4px 6px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .triangle-down {
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-top: 5px solid #666;
    }

    /* 下方表格区域 */
    .bottom-content {
      margin: 0;
      background: #fff;
      overflow-x: auto;
    }

    #myTable {
      border-collapse: collapse;
      font-size: 12px;
      table-layout: fixed;
    }

    .bottom-content th {
      background: linear-gradient(180deg, #4A90D9, #3A7BC8);
      color: #fff;
      padding: 8px 6px;
      font-weight: 500;
      font-size: 12px;
      text-align: center;
      border-right: 1px solid rgba(255,255,255,0.2);
      white-space: nowrap;
      position: relative;
      resize: horizontal;
      overflow: hidden;
      min-width: 50px;
    }

    .bottom-content th:last-child {
      border-right: none;
    }

    .bottom-content td {
      background: #fff;
      color: #333;
      padding: 8px 6px;
      font-size: 12px;
      border-bottom: 1px solid #e8e8e8;
      text-align: center;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .bottom-content tr:nth-child(even) td {
      background: #fafafa;
    }

    /* 列宽调整手柄 */
    .resize-handle {
      position: absolute;
      right: 0;
      top: 0;
      width: 5px;
      height: 100%;
      cursor: col-resize;
      background: transparent;
    }

    .resize-handle:hover {
      background: rgba(255,255,255,0.3);
    }

    /* 蓝色链接文字 */
    .link-text {
      color: #1976D2;
    }

    /* 功能按钮区域 */
    .button-bar {
      margin: 15px;
      margin-top: 150px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .func-btn {
      padding: 8px 16px;
      background: linear-gradient(180deg, #4A90D9, #3A7BC8);
      border: none;
      color: #fff;
      cursor: pointer;
      font-family: 'Microsoft YaHei', SimHei;
      font-size: 12px;
      border-radius: 4px;
      transition: all 0.2s ease;
    }

    .func-btn:hover {
      background: linear-gradient(180deg, #5A9FE8, #4A8BD8);
    }

    .func-btn:active {
      background: linear-gradient(180deg, #3A7BC8, #2A6BB8);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="content"></div>
      <div class="right-content">
        <!-- 上方表单 -->
        <div class="top-content" id="topForm">
          <div class="list-box">
            <div class="list-items">
              <label contenteditable="true">商品编码:</label>
              <input type="text">
            </div>
            <div class="list-items">
              <label contenteditable="true">门&nbsp;&nbsp;&nbsp;店:</label>
              <input type="text">
              <button class="right-button"><span class="triangle-down"></span></button>
            </div>
            <div class="list-items">
              <label contenteditable="true">起始日期:</label>
              <input type="text" class="center">
            </div>
            <div class="list-items">
              <label contenteditable="true">起始年月:</label>
              <input type="text" class="center">
            </div>
            <div class="list-items">
              <label contenteditable="true">选择排名:</label>
              <input type="text">
            </div>
            <div class="list-items">
              <label contenteditable="true">销售方式:</label>
              <input type="text">
            </div>
          </div>
          <div class="list-box">
            <div class="list-items">
              <label contenteditable="true">供&nbsp;应&nbsp;商:</label>
              <input type="text">
            </div>
            <div class="list-items">
              <label contenteditable="true">管理架构:</label>
              <input type="text">
              <button class="right-button"><span class="triangle-down"></span></button>
            </div>
            <div class="list-items">
              <label contenteditable="true">结束日期:</label>
              <input type="text" class="center">
            </div>
            <div class="list-items">
              <label contenteditable="true">结束年月:</label>
              <input type="text" class="center">
            </div>
            <div class="list-items">
              <label contenteditable="true">坐标系数:</label>
              <input type="text">
            </div>
            <div class="list-items">
              <label contenteditable="true">批发客户:</label>
              <input type="text">
            </div>
          </div>
          <div class="list-box">
            <div class="list-items">
              <label contenteditable="true">采&nbsp;购&nbsp;员:</label>
              <input type="text">
            </div>
            <div class="list-items">
              <label contenteditable="true">商品类别:</label>
              <input type="text">
            </div>
            <div class="list-items">
              <label contenteditable="true">开始时间:</label>
              <input type="text">
            </div>
            <div class="list-items">
              <label contenteditable="true">工号&nbsp;界1:</label>
              <input type="text">
            </div>
            <div class="list-items">
              <label contenteditable="true">合同编号:</label>
              <input type="text">
            </div>
            <div class="list-items">
              <label contenteditable="true">批发单号:</label>
              <input type="text">
            </div>
          </div>
          <div class="list-box">
            <div class="list-items">
              <label contenteditable="true">品&nbsp;&nbsp;&nbsp;牌:</label>
              <input type="text">
              <button class="right-button"><span class="triangle-down"></span></button>
            </div>
            <div class="list-items">
              <label contenteditable="true">经营方式:</label>
              <input type="text">
              <button class="right-button"><span class="triangle-down"></span></button>
            </div>
            <div class="list-items">
              <label contenteditable="true">结束时间:</label>
              <input type="text">
            </div>
            <div class="list-items">
              <label contenteditable="true">工号&nbsp;界2:</label>
              <input type="text">
            </div>
            <div class="list-items">
              <label contenteditable="true">单据编号:</label>
              <input type="text">
            </div>
            <div class="list-items">
              <label contenteditable="true">营业员号:</label>
              <input type="text">
            </div>
          </div>
        </div>

        <!-- 下方表格 -->
        <div class="bottom-content">
          <table id="myTable">
            <thead>
              <tr>
                <th contenteditable="true" style="width:50px;">行号<div class="resize-handle"></div></th>
                <th contenteditable="true" style="width:80px;">商品编码<div class="resize-handle"></div></th>
                <th contenteditable="true" style="width:80px;">销售条码<div class="resize-handle"></div></th>
                <th contenteditable="true" style="width:100px;">商品名称<div class="resize-handle"></div></th>
                <th contenteditable="true" style="width:70px;">销售数量<div class="resize-handle"></div></th>
                <th contenteditable="true" style="width:80px;">实际销售<div class="resize-handle"></div></th>
                <th contenteditable="true" style="width:80px;">产地<div class="resize-handle"></div></th>
                <th contenteditable="true" style="width:70px;">资料进价</th>
              </tr>
            </thead>
            <tbody id="tableBody">
              <tr>
                <td style="text-align:center;" contenteditable="true">1</td>
                <td contenteditable="true">123456</td>
                <td style="text-align:center;" contenteditable="true">10503</td>
                <td contenteditable="true">好巴食豆干</td>
                <td style="text-align:right;" contenteditable="true">23.23</td>
                <td style="text-align:right;" contenteditable="true">928.92</td>
                <td style="text-align:left;" contenteditable="true">[05014]四川</td>
                <td style="text-align:right;" contenteditable="true">22</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- 功能按钮区域 -->
        <div class="button-bar">
          <button class="func-btn" id="btnChangeTopBg">修改表单背景</button>
          <button class="func-btn" id="btnAddFormItem">增加表单项</button>
          <button class="func-btn" id="btnAddRow">增加一行</button>
          <button class="func-btn" id="btnDeleteRow">删除一行</button>
          <button class="func-btn" id="btnChangeTableBg">修改表格背景</button>
          <button class="func-btn" id="btnChangeHeaderBg">修改表头背景</button>
          <button class="func-btn" id="btnAddColumn">增加一列</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 工具函数：生成随机颜色
    function getRandomColor() {
      const letters = '0123456789ABCDEF';
      let color = '#';
      for (let i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
      }
      return color;
    }

    // 创建隐藏的颜色选择器
    const colorPicker = document.createElement('input');
    colorPicker.type = 'color';
    colorPicker.style.display = 'none';
    document.body.appendChild(colorPicker);

    // 1. 修改上方表单背景颜色
    document.getElementById('btnChangeTopBg').addEventListener('click', function() {
      colorPicker.value = '#d5d7e1';
      colorPicker.onchange = function() {
        document.getElementById('topForm').style.background = this.value;
      };
      colorPicker.click();
    });

    // 2. 增加表单项
    document.getElementById('btnAddFormItem').addEventListener('click', function() {
      const labelName = prompt('请输入标签名称:', '新字段');
      if (labelName === null) return;
      
      const listBoxes = document.querySelectorAll('.list-box');
      // 找到项目最少的列
      let minBox = listBoxes[0];
      let minCount = listBoxes[0].children.length;
      listBoxes.forEach(box => {
        if (box.children.length < minCount) {
          minCount = box.children.length;
          minBox = box;
        }
      });

      const newItem = document.createElement('div');
      newItem.className = 'list-items';
      newItem.innerHTML = `
        <label contenteditable="true">${labelName}:</label>
        <input type="text">
      `;
      minBox.appendChild(newItem);

      // 绑定双击删除事件
      newItem.addEventListener('dblclick', function() {
        this.style.display = 'none';
      });
    });

    // 3. 增加表格行
    document.getElementById('btnAddRow').addEventListener('click', function() {
      const tbody = document.getElementById('tableBody');
      const rowCount = tbody.rows.length + 1;
      
      const cellsData = [
        { content: rowCount, style: 'text-align:center;' },
        { content: '123456', style: '' },
        { content: '10503', style: 'text-align:center;' },
        { content: '好巴食豆干', style: '' },
        { content: '23.23', style: 'text-align:right;' },
        { content: '928.92', style: 'text-align:right;' },
        { content: '[05014]四川', style: 'text-align:left;' },
        { content: '22', style: 'text-align:right;' }
      ];

      const newRow = tbody.insertRow(-1);
      cellsData.forEach(cellData => {
        const newCell = newRow.insertCell(-1);
        newCell.contentEditable = 'true';
        newCell.style.cssText = cellData.style;
        newCell.textContent = cellData.content;
      });
    });

    // 4. 删除表格行
    document.getElementById('btnDeleteRow').addEventListener('click', function() {
      const tbody = document.getElementById('tableBody');
      if (tbody.rows.length > 0) {
        tbody.deleteRow(-1);
      } else {
        alert('没有可删除的行！');
      }
    });

    // 5. 修改表格tbody背景颜色
    document.getElementById('btnChangeTableBg').addEventListener('click', function() {
      colorPicker.value = '#1B6FC0';
      colorPicker.onchange = function() {
        const cells = document.querySelectorAll('#tableBody td');
        cells.forEach(cell => {
          cell.style.background = this.value;
        });
      };
      colorPicker.click();
    });

    // 6. 修改表格表头背景颜色
    document.getElementById('btnChangeHeaderBg').addEventListener('click', function() {
      colorPicker.value = '#1B6FC0';
      colorPicker.onchange = function() {
        const headers = document.querySelectorAll('#myTable th');
        headers.forEach(th => {
          th.style.background = this.value;
        });
      };
      colorPicker.click();
    });

    // 7. 增加表格一列
    document.getElementById('btnAddColumn').addEventListener('click', function() {
      const columnName = prompt('请输入列名称:', '新列');
      if (columnName === null) return;

      // 添加表头
      const thead = document.querySelector('#myTable thead tr');
      const newTh = document.createElement('th');
      newTh.contentEditable = 'true';
      newTh.style.width = '80px';
      newTh.innerHTML = columnName + '<div class="resize-handle"></div>';
      thead.appendChild(newTh);
      
      // 为新列添加拖拽调整功能
      const handle = newTh.querySelector('.resize-handle');
      addResizeHandler(handle, newTh);

      // 为每一行添加单元格
      const rows = document.querySelectorAll('#tableBody tr');
      rows.forEach(row => {
        const newTd = document.createElement('td');
        newTd.contentEditable = 'true';
        newTd.textContent = '';
        row.appendChild(newTd);
      });
    });

    // 双击隐藏表单项
    document.querySelectorAll('.list-items').forEach(element => {
      element.addEventListener('dblclick', function() {
        this.style.display = 'none';
      });
    });

    // 列宽拖拽调整功能
    function addResizeHandler(handle, th) {
      let startX, startWidth;
      
      handle.addEventListener('mousedown', function(e) {
        startX = e.pageX;
        startWidth = th.offsetWidth;
        
        document.addEventListener('mousemove', onMouseMove);
        document.addEventListener('mouseup', onMouseUp);
        e.preventDefault();
      });
      
      function onMouseMove(e) {
        const width = startWidth + (e.pageX - startX);
        if (width >= 50) {
          th.style.width = width + 'px';
        }
      }
      
      function onMouseUp() {
        document.removeEventListener('mousemove', onMouseMove);
        document.removeEventListener('mouseup', onMouseUp);
      }
    }

    // 初始化所有列的拖拽调整
    document.querySelectorAll('.resize-handle').forEach(handle => {
      const th = handle.parentElement;
      addResizeHandler(handle, th);
    });
  </script>
</body>

</html>